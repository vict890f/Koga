<!DOCTYPE html>
<html lang="">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="style.css">
    <title></title>

</head>

<body>

    <header>
        <div id="header_logo">
            <img src="assets/kogaLogo_A0_Rectangle_5_pattern@2x.png" alt="">
        </div>

        <nav>
            <a href="forside.html">Forside</a>
            <a href="cykler.html">Cykler</a>
            <a href="om.html">Om</a>
        </nav>

    </header>

    <section class="underside_splash">

        <h1>KOGA, MEGET MERE END EN CYKEL</h1>


    </section>



    <section id="underside_info">
        <h1>KOGA, MEGET MERE END EN CYKEL</h1>
        <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit. Sapiente harum, corporis, aut quam dolores minima maiores. Fugiat laboriosam adipisci temporibus, placeat repellendus! Neque animi id impedit perferendis, vel, sint iste.</p>

        <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit. Sapiente harum, corporis, aut quam dolores minima maiores. Fugiat laboriosam adipisci temporibus, placeat repellendus! Neque animi id impedit perferendis, vel, sint iste.</p>
    </section>


    <div id="knapper">
        <button class="filter valgt" data-kategori="alle">Alle</button>
        <button class="filter" data-kategori="Race-bike">Racing</button>
        <button class="filter" data-kategori="E-bike">E-bike</button>
        <button class="filter" data-kategori="City/Touring-Bike">City Tour</button>
    </div>

    <main id="underside_box">
        <section class="liste"></section>
        <template>
            <article class="box">
                <img class="billede" src="">
                <h2 class="title"></h2>
                <h3 class="pris"></h3>
            </article>
        </template>
    </main>


    <section class="vaerdier">
        <img src="assets/vaerdier.jpg" alt="">

    </section>


    <footer>
        <div id="footer_cykler">
            <h2>E-bikes</h2>
            <h3>City & Touring</h3>
            <h3>Trekking</h3>
            <h3>Race</h3>
            <h3>Signature</h3>
        </div>
        <div id="footer_service">
            <h2>E-bikes</h2>
            <h3>City & Touring</h3>
            <h3>Trekking</h3>
            <h3>Race</h3>
            <h3>Signature</h3>
        </div>
        <div id="footer_om_koga">
            <h2>E-bikes</h2>
            <h3>City & Touring</h3>
            <h3>Trekking</h3>
            <h3>Race</h3>
            <h3>Signature</h3>
        </div>
        <div id="footer_social">
            <h2>E-bikes</h2>
            <h3>City & Touring</h3>
            <h3>Trekking</h3>
            <h3>Race</h3>
            <h3>Signature</h3>
        </div>
    </footer>

    <script>
        //Hent cykler

        let forside;
        let forsideBoks;
        let cykler = [];
        let filter = "alle";
        const cyklerUrl = "https://victorborgen.dk/kogacenter/wordpress/wp-json/wp/v2/cykler?per_page=50";
        const skabelon = document.querySelector("template");
        const liste = document.querySelector(".liste");


        document.addEventListener("DOMContentLoaded", start);

        function start() {
            hentJsonSplash();
            knapperVirker();
        }

        async function hentJsonSplash() {
            const response = await fetch(forsideUrl);
            forside = await response.json();
            hentJsonBoks();
        }

        async function hentJsonBoks() {
            const response = await fetch(kogaboksUrl);
            forsideBoks = await response.json();
            vis();
        }

        function vis() {
            document.querySelector(".underside_splash").innerHTML = forside.content.rendered;

            hentCyklerJson();
        }

        async function hentCyklerJson() {
            const response = await fetch(cyklerUrl);
            cykler = await response.json();
            console.log(cykler);
            visCykler();
        }

        function visCykler() {

            liste.innerHTML = "";

            cykler.forEach(cykel => {

                if (filter == "alle" || filter == cykel.cykel_type) {
                    console.log(cykler);
                    const klon = skabelon.cloneNode(true).content;

                    //  Billederne ligger i et array, og vi benytter os da af [0], for at vise det første billede i arrayet
                    klon.querySelector(".billede").src = cykel.billede[0].guid;
                    klon.querySelector(".billede").alt = cykel.title.rendered + " billede";
                    klon.querySelector(".title").textContent = cykel.title.rendered;
                    klon.querySelector(".pris").textContent = `DKK ${cykel.
                    pris_cykel}`;

                    liste.appendChild(klon);

                    liste.lastElementChild.addEventListener("click", () => {
                        location.href = `cykel_singleview.html?id=${cykel.id}`;
                    });
                }
            });



            //    cykel.billeder.forEach(b => {});
        }

        function knapperVirker() {
            // får alle knapper til at virke
            document.querySelectorAll(".filter").forEach(elm => {
                elm.addEventListener("click", filtrering);
            })
        }

        function filtrering() {
            filter = this.dataset.kategori;

            // styrer overskriften
            document.querySelector("h1").textContent = this.textContent;

            // knapperne skifter farve
            document.querySelectorAll(".filter").forEach(elm => {
                elm.classList.remove("valgt");
            })
            this.classList.add("valgt");

            vis();
        }



        //    cykel.billeder.forEach(b => {});





        //
        //            cykler.forEach(cykel => {
        //                const klon = skabelon.cloneNode(true).content;
        //                klon.querySelector(".title").textContent = cykel.title.rendered;
        //                klon.querySelector(".beskrivelse").innerHTML = cykel.content.rendered;
        //
        //                klon.querySelector(".billede").src = cykel.billede[0].guid;
        //
        //                liste.appendChild(klon);
        //            });
        //        }

    </script>
</body>

</html>
